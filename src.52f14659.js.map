{"version":3,"sources":["src/index.js"],"names":["windowElements","document","querySelectorAll","icons","windowList","pdfTab","txtTab","imgTab","window","maxZIndex","Window","el","initX","initY","off","console","log","height","width","style","zIndex","isGrabbed","isReduced","isInit","grabOffset","x","y","dataset","getBoundingClientRect","posX","posY","Math","random","setWindowPosition","close","querySelector","reduce","to_open","addEventListener","e","Close","Reduce","Open","grabbedWindow","id","location","reload","remove","length","doc","newDiv","createElement","insertBefore","innerHTML","classList","add","setAttribute","push","forEach","icon","firstElementChild","rectangle","innerWidth","innerHeight","transform","Move","reduced","transition","win","parseInt","parentNode","x1","redArray","Array","from","sort","a","b","red","clientX","clientY","children","pointerEvents","rect","ico"],"mappings":"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","file":"src.52f14659.js","sourceRoot":"..","sourcesContent":["\r\n//ensemble des fenetres\r\nvar windowElements = document.querySelectorAll(\".windows .win\");\r\n//ensemble des icones\r\nvar icons = document.querySelectorAll(\".windows .icon\")\r\n\r\nconst windowList = [];\r\n\r\n//memorisation des fenetres\r\nvar pdfTab=null;\r\nvar txtTab=null;\r\nvar imgTab=null;\r\n\r\n//z-index pour placer les objets au plus haut\r\nwindow.maxZIndex = 0;\r\n\r\n//classe window\r\nclass Window {\r\n    constructor(el, initX, initY,off) {\r\n        console.log('new')\r\n        this.el = el;\r\n        let height = 300;\r\n        let width = 300;\r\n        this.el.style.zIndex = window.maxZIndex++;\r\n        this.isGrabbed = false;\r\n        this.isReduced = false;\r\n        this.isInit = false;\r\n\r\n        this.grabOffset = { x: 0, y: 0 };\r\n\r\n        if (this.el.dataset.width && this.el.dataset.height) {\r\n\r\n          width = this.el.dataset.width;\r\n          height = this.el.dataset.height;\r\n          console.log(width,height)\r\n        }\r\n        this.el.style.width = width + \"px\";\r\n        this.el.style.height = height + \"px\";\r\n        const rectangle = this.el.getBoundingClientRect();\r\n        if (this.el.dataset.initX && this.el.dataset.initY) {\r\n              this.posX =\r\n                (this.el.dataset.initX / 100) ;\r\n              this.posY =\r\n                (this.el.dataset.initY / 100) ;\r\n            }\r\n        else{\r\n            this.posX = Math.random() ;\r\n            this.posY = Math.random() ;\r\n        }\r\n\r\n        this.setWindowPosition();\r\n\r\n        //bouton close\r\n        const close=el.querySelector(\".off\")\r\n\r\n        //bouton reduce\r\n        const reduce=el.querySelector(\".red\")\r\n\r\n        //top bar fenetre\r\n        const to_open=el.querySelector(\"#top\")\r\n\r\n\r\n        close.addEventListener(\"mousedown\", (e) => this.Close(e));\r\n\r\n\r\n\r\n        if (reduce!=null){\r\n        reduce.addEventListener(\"mouseup\", (e) => this.Reduce(e));\r\n        }\r\n\r\n        if (to_open!=null){\r\n                to_open.addEventListener(\"mousedown\", (e) => this.Open(e));\r\n                }\r\n\r\n\r\n        el.addEventListener(\"mousedown\", (e) => this.grabbedWindow(e));\r\n    }\r\n\r\n    //fermeture fenetre\r\n    Close(e) {\r\n        console.log('close');\r\n\r\n        //test fermeture de la fenetre de depart\r\n        if(this.el.id=='end'){\r\n             location.reload();\r\n        }\r\n\r\n        else{\r\n            //suppression de la fenetre\r\n            this.el.remove()\r\n            var windowElements = document.querySelectorAll(\".windows .win\");\r\n\r\n            //test du nombre de fenetres restantes\r\n            //si aucune fenetre => fenetre de depart\r\n            if (windowElements.length==0){\r\n\r\n            console.log('well done')\r\n            const doc = document.querySelector(\".windows\")\r\n            //console.log(doc)\r\n            var newDiv = document.createElement('div');\r\n            console.log(newDiv);\r\n            document.querySelector('.windows').insertBefore(newDiv,document.querySelector(' .icon'));\r\n\r\n            newDiv.innerHTML='<div id=\"top\">'\r\n                                  +'<div class=\"windows-title\"><p>end.txt</p></div>'\r\n                                + ' <div class=\"option\">'\r\n                                 +     '<div class=\"red\"> _ </div>'\r\n                               +       '<div class=\"off\"> X </div>'\r\n                               +   '</div>'\r\n                             + '</div>'\r\n                            + ' <div id=\"cv_all\">'\r\n                              +    '<h1>Well done 😉</h1>'\r\n                             + '</div>'\r\n            newDiv.classList.add(\"win\");\r\n            newDiv.setAttribute('data-width', \"700\");\r\n            newDiv.setAttribute('data-height', \"250\");\r\n            newDiv.id='end'\r\n            console.log(newDiv.dataset);\r\n            windowList.push(new Window(newDiv));\r\n\r\n            //suppression des icones\r\n            document.querySelectorAll('.icon').forEach((icon)=>{\r\n            icon.remove()\r\n            })\r\n\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    //ouverture fenetre reduced\r\n    Open(e){\r\n        var x=0;\r\n        var y=0;\r\n        if(this.isReduced){\r\n            console.log('open');\r\n            this.isReduced = false;\r\n            this.el.firstElementChild.classList.remove(\"is-reduced\");\r\n            this.el.querySelector(\".red\").innerHTML='_';\r\n            const rectangle = this.el.getBoundingClientRect();\r\n\r\n            //on remet la fenetre a sa place avant reduction\r\n            x=this.posX * (window.innerWidth - rectangle.width);\r\n            y=this.posY* (window.innerHeight - rectangle.height);\r\n            const reduced=document.querySelectorAll(\".is-reduced\");\r\n\r\n\r\n            this.el.style.transform = `translate3d(${x}px, ${y }px, 0)`;\r\n            this.Move()\r\n\r\n        }\r\n\r\n    }\r\n\r\n    //reduire fenetre\r\n    Reduce(e) {\r\n        var x=0;\r\n        var y=0;\r\n\r\n        if(!this.isReduced){\r\n            console.log('reduce');\r\n            const reduced=document.querySelectorAll(\".is-reduced\");\r\n            this.el.style.transition='transform 230ms ease-in-out'\r\n            \r\n            x=30;\r\n\r\n            if (reduced.length>0){\r\n\r\n                reduced.forEach((win)=>{\r\n                x+=5;\r\n                x+=parseInt(win.parentNode.dataset.width,10)})\r\n                console.log(x)\r\n            }\r\n            this.isReduced = true;\r\n            this.el.firstElementChild.classList.add(\"is-reduced\")\r\n            this.el.querySelector(\".red\").innerHTML='☐';\r\n            y=window.innerHeight - 42;\r\n\r\n            const rectangle = this.el.getBoundingClientRect();\r\n            //this.el.style.transition= 'transform 230ms ease-in-out';\r\n            this.el.style.transform = `translate3d(${x}px, ${y }px, 0)`;\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    //gestion des fenetres reduites => affichage dans l'ordre de reduction\r\n    Move(){\r\n        console.log('move')\r\n        var x1=30;\r\n\r\n        const reduced=document.querySelectorAll(\".is-reduced\");\r\n        if (reduced.length>0){\r\n            const redArray=Array.from(reduced)\r\n            //console.log(redArray)\r\n            redArray.sort(function(a, b){\r\n                        return a.parentNode.style.zIndex-b.parentNode.style.zIndex})\r\n            //console.log(redArray)\r\n            redArray.forEach((red)=>{\r\n                //console.log(red.parentNode.style.zIndex)\r\n                //console.log(x1,red.parentNode.offsetWidth);\r\n                red.parentNode.style.transform = `translate3d(${x1}px, ${(window.innerHeight - 42)}px, 0)`;\r\n                x1+=parseInt(red.parentNode.dataset.width,10);\r\n                x1+=5;\r\n            });\r\n        }\r\n    }\r\n\r\n    grabbedWindow(e) {\r\n        //console.log(e);\r\n        if (!this.isReduced){\r\n            this.el.style.zIndex = window.maxZIndex++;\r\n            this.isGrabbed = true;\r\n            this.el.classList.add(\"is-grabbed\");\r\n\r\n            //computing offset between mouse and card origin\r\n            const rectangle = this.el.getBoundingClientRect();\r\n            this.grabOffset = {\r\n              x: e.clientX - rectangle.x,\r\n              y: e.clientY - rectangle.y\r\n            };\r\n        }\r\n    }\r\n\r\n    setWindowPosition() {\r\n        const rectangle = this.el.getBoundingClientRect();\r\n\r\n        this.el.style.transform = `translate3d(${this.posX * (window.innerWidth - rectangle.width)}px, ${this.posY* (window.innerHeight - rectangle.height)}px, 0)`;\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n//creation des objets fenetres\r\nwindowElements.forEach((el) => {\r\n  windowList.push(new Window(el));\r\n  //memorisation des fenetres\r\n  if(el.id=='pdf'){\r\n        pdfTab=el;\r\n        }\r\n  if(el.id=='txt'){\r\n          txtTab=el;\r\n          }\r\n  if(el.id=='image'){\r\n            imgTab=el;\r\n            }\r\n});\r\n\r\n//on enleve l'attribut is-grabbed lorsqu'on lache une fenetre\r\nwindow.addEventListener(\"mouseup\", () => {\r\n  windowList.forEach((win) => {\r\n    win.isGrabbed = false;\r\n    win.el.classList.remove(\"is-grabbed\");\r\n    win.el.children[0].style.pointerEvents='auto'\r\n    //console.log(win.el.children[0].style)\r\n  });\r\n});\r\n\r\n\r\n//detection des mouvements de souris\r\nwindow.addEventListener(\"mousemove\", (e) => {\r\n  windowList.forEach((win) => {\r\n    //console.log(e);\r\n\r\n    //console.log(win.el.children[0].style)\r\n\r\n    //mis a jour de la position de la fenetre grabbed\r\n    if (win.isGrabbed) {\r\n      win.el.children[0].style.pointerEvents='none';\r\n      win.el.style.transition= '';\r\n      win.el.style.transform = `translate3d(${\r\n              e.clientX - win.grabOffset.x\r\n            }px, ${e.clientY - win.grabOffset.y}px, 0)`;\r\n      const rect = win.el.getBoundingClientRect();\r\n      win.posX=rect.x/(window.innerWidth - rect.width);\r\n      win.posY=rect.y/(window.innerHeight - rect.height);\r\n\r\n    }\r\n  });\r\n});\r\n\r\n\r\n//mis a jour des position lors du redimmensionnement du navigateur\r\nwindow.addEventListener(\"resize\", () => {\r\n  windowList.forEach((win) => {\r\n    win.setWindowPosition();\r\n    //console.log(win.posX)\r\n  });\r\n});\r\n\r\n//lecture double clicks sur une icone\r\nicons.forEach((ico) => {\r\n    ico.addEventListener(\"dblclick\", () => {\r\n\r\n        if(ico.id=='txt'){\r\n            document.querySelector('.windows').insertBefore(txtTab,document.querySelector(' .icon'));\r\n            //document.querySelector('.windows').insertBefore(txtTab,document.querySelector(' .icon'));\r\n            txtTab.style.zIndex = window.maxZIndex++;\r\n        }\r\n\r\n        if(ico.id=='image'){\r\n            console.log('open '+ico.id)\r\n            document.querySelector('.windows').insertBefore(imgTab,document.querySelector(' .icon'));\r\n            imgTab.style.zIndex = window.maxZIndex++;\r\n                }\r\n\r\n        if(ico.id=='pdf'){\r\n            console.log('open '+ico.id)\r\n            document.querySelector('.windows').insertBefore(pdfTab,document.querySelector(' .icon'));\r\n            pdfTab.style.zIndex = window.maxZIndex++;\r\n        }\r\n        });\r\n\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}