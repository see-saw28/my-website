{"version":3,"sources":["src/index.js"],"names":["windowElements","document","querySelectorAll","icons","windowList","pdfTab","txtTab","imgTab","window","maxZIndex","Window","el","initX","initY","off","console","log","height","width","style","zIndex","isGrabbed","isReduced","isInit","grabOffset","x","y","dataset","rectangle","getBoundingClientRect","posX","posY","Math","random","setWindowPosition","close","querySelector","reduce","to_open","addEventListener","e","Close","Reduce","Open","grabbedWindow","id","location","reload","remove","length","doc","newDiv","createElement","insertBefore","innerHTML","classList","add","setAttribute","push","forEach","icon","firstElementChild","innerWidth","innerHeight","reduced","transform","Move","transition","win","parseInt","parentNode","x1","redArray","Array","from","sort","a","b","red","clientX","clientY","children","pointerEvents","rect","ico"],"mappings":"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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["\r\n//ensemble des fenetres\r\nvar windowElements = document.querySelectorAll(\".windows .win\");\r\n//ensemble des icones\r\nvar icons = document.querySelectorAll(\".windows .icon\")\r\n\r\nconst windowList = [];\r\n\r\n//memorisation des fenetres\r\nvar pdfTab=null;\r\nvar txtTab=null;\r\nvar imgTab=null;\r\n\r\n//z-index pour placer les objets au plus haut\r\nwindow.maxZIndex = 0;\r\n\r\n//classe window\r\nclass Window {\r\n    constructor(el, initX, initY,off) {\r\n        console.log('new')\r\n        this.el = el;\r\n        let height = 300;\r\n        let width = 300;\r\n        this.el.style.zIndex = window.maxZIndex++;\r\n        this.isGrabbed = false;\r\n        this.isReduced = false;\r\n        this.isInit = false;\r\n\r\n        this.grabOffset = { x: 0, y: 0 };\r\n\r\n        if (this.el.dataset.width && this.el.dataset.height) {\r\n\r\n          width = this.el.dataset.width;\r\n          height = this.el.dataset.height;\r\n          console.log(width,height)\r\n        }\r\n        this.el.style.width = width + \"px\";\r\n        this.el.style.height = height + \"px\";\r\n        const rectangle = this.el.getBoundingClientRect();\r\n        if (this.el.dataset.initX && this.el.dataset.initY) {\r\n              this.posX =\r\n                (this.el.dataset.initX / 100) ;\r\n              this.posY =\r\n                (this.el.dataset.initY / 100) ;\r\n            }\r\n        else{\r\n            this.posX = Math.random() ;\r\n            this.posY = Math.random() ;\r\n        }\r\n\r\n        this.setWindowPosition();\r\n\r\n        //bouton close\r\n        const close=el.querySelector(\".off\")\r\n\r\n        //bouton reduce\r\n        const reduce=el.querySelector(\".red\")\r\n\r\n        //top bar fenetre\r\n        const to_open=el.querySelector(\"#top\")\r\n\r\n\r\n        close.addEventListener(\"mousedown\", (e) => this.Close(e));\r\n\r\n\r\n\r\n        if (reduce!=null){\r\n        reduce.addEventListener(\"mouseup\", (e) => this.Reduce(e));\r\n        }\r\n\r\n        if (to_open!=null){\r\n                to_open.addEventListener(\"mousedown\", (e) => this.Open(e));\r\n                }\r\n\r\n\r\n        el.addEventListener(\"mousedown\", (e) => this.grabbedWindow(e));\r\n    }\r\n\r\n    //fermeture fenetre\r\n    Close(e) {\r\n        console.log('close');\r\n\r\n        //test fermeture de la fenetre de depart\r\n        if(this.el.id=='end'){\r\n             location.reload();\r\n        }\r\n\r\n        else{\r\n            //suppression de la fenetre\r\n            this.el.remove()\r\n            var windowElements = document.querySelectorAll(\".windows .win\");\r\n\r\n            //test du nombre de fenetres restantes\r\n            //si aucune fenetre => fenetre de depart\r\n            if (windowElements.length==0){\r\n\r\n            console.log('well done')\r\n            const doc = document.querySelector(\".windows\")\r\n            //console.log(doc)\r\n            var newDiv = document.createElement('div');\r\n            console.log(newDiv);\r\n            document.querySelector('.windows').insertBefore(newDiv,document.querySelector(' .icon'));\r\n\r\n            newDiv.innerHTML='<div id=\"top\">'\r\n                                  +'<div class=\"windows-title\"><p>end.txt</p></div>'\r\n                                + ' <div class=\"option\">'\r\n                                 +     '<div class=\"red\"> _ </div>'\r\n                               +       '<div class=\"off\"> X </div>'\r\n                               +   '</div>'\r\n                             + '</div>'\r\n                            + ' <div id=\"cv_all\">'\r\n                              +    '<h1>Well done 😉</h1>'\r\n                             + '</div>'\r\n            newDiv.classList.add(\"win\");\r\n            newDiv.setAttribute('data-width', \"700\");\r\n            newDiv.setAttribute('data-height', \"250\");\r\n            newDiv.id='end'\r\n            console.log(newDiv.dataset);\r\n            windowList.push(new Window(newDiv));\r\n\r\n            //suppression des icones\r\n            document.querySelectorAll('.icon').forEach((icon)=>{\r\n            icon.remove()\r\n            })\r\n\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    //ouverture fenetre reduced\r\n    Open(e){\r\n        var x=0;\r\n        var y=0;\r\n        if(this.isReduced){\r\n            console.log('open');\r\n            this.isReduced = false;\r\n            this.el.firstElementChild.classList.remove(\"is-reduced\");\r\n            this.el.querySelector(\".red\").innerHTML='_';\r\n            const rectangle = this.el.getBoundingClientRect();\r\n\r\n            //on remet la fenetre a sa place avant reduction\r\n            x=this.posX * (window.innerWidth - rectangle.width);\r\n            y=this.posY* (window.innerHeight - rectangle.height);\r\n            const reduced=document.querySelectorAll(\".is-reduced\");\r\n\r\n\r\n            this.el.style.transform = `translate3d(${x}px, ${y }px, 0)`;\r\n            this.Move()\r\n\r\n        }\r\n\r\n    }\r\n\r\n    //reduire fenetre\r\n    Reduce(e) {\r\n        var x=0;\r\n        var y=0;\r\n\r\n        if(!this.isReduced){\r\n            console.log('reduce');\r\n            const reduced=document.querySelectorAll(\".is-reduced\");\r\n            this.el.style.transition='transform 230ms ease-in-out'\r\n            \r\n            x=30;\r\n\r\n            if (reduced.length>0){\r\n\r\n                reduced.forEach((win)=>{\r\n                x+=5;\r\n                x+=parseInt(win.parentNode.dataset.width,10)})\r\n                console.log(x)\r\n            }\r\n            this.isReduced = true;\r\n            this.el.firstElementChild.classList.add(\"is-reduced\")\r\n            this.el.querySelector(\".red\").innerHTML='☐';\r\n            y=window.innerHeight - 42;\r\n\r\n            const rectangle = this.el.getBoundingClientRect();\r\n            //this.el.style.transition= 'transform 230ms ease-in-out';\r\n            this.el.style.transform = `translate3d(${x}px, ${y }px, 0)`;\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    //gestion des fenetres reduites => affichage dans l'ordre de reduction\r\n    Move(){\r\n        console.log('move')\r\n        var x1=30;\r\n\r\n        const reduced=document.querySelectorAll(\".is-reduced\");\r\n        if (reduced.length>0){\r\n            const redArray=Array.from(reduced)\r\n            //console.log(redArray)\r\n            redArray.sort(function(a, b){\r\n                        return a.parentNode.style.zIndex-b.parentNode.style.zIndex})\r\n            //console.log(redArray)\r\n            redArray.forEach((red)=>{\r\n                //console.log(red.parentNode.style.zIndex)\r\n                //console.log(x1,red.parentNode.offsetWidth);\r\n                red.parentNode.style.transform = `translate3d(${x1}px, ${(window.innerHeight - 42)}px, 0)`;\r\n                x1+=parseInt(red.parentNode.dataset.width,10);\r\n                x1+=5;\r\n            });\r\n        }\r\n    }\r\n\r\n    grabbedWindow(e) {\r\n        //console.log(e);\r\n        if (!this.isReduced){\r\n            this.el.style.zIndex = window.maxZIndex++;\r\n            this.isGrabbed = true;\r\n            this.el.classList.add(\"is-grabbed\");\r\n\r\n            //computing offset between mouse and card origin\r\n            const rectangle = this.el.getBoundingClientRect();\r\n            this.grabOffset = {\r\n              x: e.clientX - rectangle.x,\r\n              y: e.clientY - rectangle.y\r\n            };\r\n        }\r\n    }\r\n\r\n    setWindowPosition() {\r\n        const rectangle = this.el.getBoundingClientRect();\r\n\r\n        this.el.style.transform = `translate3d(${this.posX * (window.innerWidth - rectangle.width)}px, ${this.posY* (window.innerHeight - rectangle.height)}px, 0)`;\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n//creation des objets fenetres\r\nwindowElements.forEach((el) => {\r\n  windowList.push(new Window(el));\r\n  //memorisation des fenetres\r\n  if(el.id=='pdf'){\r\n        pdfTab=el;\r\n        }\r\n  if(el.id=='txt'){\r\n          txtTab=el;\r\n          }\r\n  if(el.id=='image'){\r\n            imgTab=el;\r\n            }\r\n});\r\n\r\n//on enleve l'attribut is-grabbed lorsqu'on lache une fenetre\r\nwindow.addEventListener(\"mouseup\", () => {\r\n  windowList.forEach((win) => {\r\n    win.isGrabbed = false;\r\n    win.el.classList.remove(\"is-grabbed\");\r\n    win.el.children[0].style.pointerEvents='auto'\r\n    //console.log(win.el.children[0].style)\r\n  });\r\n});\r\n\r\n\r\n//detection des mouvements de souris\r\nwindow.addEventListener(\"mousemove\", (e) => {\r\n  windowList.forEach((win) => {\r\n    //console.log(e);\r\n\r\n    //console.log(win.el.children[0].style)\r\n\r\n    //mis a jour de la position de la fenetre grabbed\r\n    if (win.isGrabbed) {\r\n      win.el.children[0].style.pointerEvents='none';\r\n      win.el.style.transition= '';\r\n      win.el.style.transform = `translate3d(${\r\n              e.clientX - win.grabOffset.x\r\n            }px, ${e.clientY - win.grabOffset.y}px, 0)`;\r\n      const rect = win.el.getBoundingClientRect();\r\n      win.posX=rect.x/(window.innerWidth - rect.width);\r\n      win.posY=rect.y/(window.innerHeight - rect.height);\r\n\r\n    }\r\n  });\r\n});\r\n\r\n\r\n//mis a jour des position lors du redimmensionnement du navigateur\r\nwindow.addEventListener(\"resize\", () => {\r\n  windowList.forEach((win) => {\r\n    win.setWindowPosition();\r\n    //console.log(win.posX)\r\n  });\r\n});\r\n\r\n//lecture double clicks sur une icone\r\nicons.forEach((ico) => {\r\n    ico.addEventListener(\"dblclick\", () => {\r\n\r\n        if(ico.id=='txt'){\r\n            document.querySelector('.windows').insertBefore(txtTab,document.querySelector(' .icon'));\r\n            //document.querySelector('.windows').insertBefore(txtTab,document.querySelector(' .icon'));\r\n            txtTab.style.zIndex = window.maxZIndex++;\r\n        }\r\n\r\n        if(ico.id=='image'){\r\n            console.log('open '+ico.id)\r\n            document.querySelector('.windows').insertBefore(imgTab,document.querySelector(' .icon'));\r\n            imgTab.style.zIndex = window.maxZIndex++;\r\n                }\r\n\r\n        if(ico.id=='pdf'){\r\n            console.log('open '+ico.id)\r\n            document.querySelector('.windows').insertBefore(pdfTab,document.querySelector(' .icon'));\r\n            pdfTab.style.zIndex = window.maxZIndex++;\r\n        }\r\n        });\r\n\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}